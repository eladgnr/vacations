<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Vacations Status</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Vacations Status</h2>
        <a href="{% url 'stats_homepage' %}" class="btn btn-secondary">â¬… Back to Homepage</a>
    </div>

    <!-- Legend -->
    <div class="mb-3">
        <span class="badge bg-danger">Overdue</span>
    </div>

    <table class="table table-striped text-center" id="overdueTable">
        <thead class="table-dark">
            <tr>
                <th>Country</th>
                <th>City</th>
                <th>Start Date</th>
                <th>End Date</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        fetch("{% url 'vacations_overdue_api' %}")
            .then(r => r.json())
            .then(data => {
                const tbody = document.querySelector("#overdueTable tbody");
                tbody.innerHTML = "";
                data.forEach(item => {
                    let rowClass = "";
                    if (item.status === "overdue") rowClass = "table-danger fw-bold";

                    const row = `<tr class="${rowClass}">
                        <td>${item.country}</td>
                        <td>${item.city}</td>
                        <td>${item.start_date}</td>
                        <td>${item.end_date}</td>
                    </tr>`;
                    tbody.insertAdjacentHTML("beforeend", row);
                });
            });
    </script>

</body>

</html>